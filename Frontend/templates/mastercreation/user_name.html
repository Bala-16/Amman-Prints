{%extends "nav.html"%}
{%block title%}User Name{%endblock%}
{%block extra_head%}

  <!-- ‚úÖ Bootstrap CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  >

  <style>
    body {
      background: #f4f6fb;
      font-family: "Segoe UI", sans-serif;
    }

    /* Header Card */
    .page-header {
      background: linear-gradient(to right, #0d9488, #0891b2);
      padding: 25px;
      border-radius: 18px;
      color: white;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 25px;
      flex-wrap: wrap;
      gap: 15px;
    }

    .page-header h2 {
      font-size: 26px;
      font-weight: bold;
      margin: 0;
    }

    /* Add Button */
    .add-btn {
      background: white;
      color: #0d9488;
      border: none;
      padding: 10px 18px;
      border-radius: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: 0.2s;
    }

    .add-btn:hover {
      background: #0d9488;
      color: white;
    }

    /* Table Card */
    .table-card {
      background: white;
      margin: 25px;
      padding: 20px;
      border-radius: 18px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.08);
      overflow-x: auto;
    }

    table th {
      background: #f8fafc !important;
      font-weight: 700;
      white-space: nowrap;
    }

    /* Action Buttons */
    .action-btn {
      border: none;
      padding: 6px 12px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
    }

    .edit-btn {
      background: #0d9488;
      color: white;
    }

    .delete-btn {
      background: #dc2626;
      color: white;
      text-decoration: none;
    }

    .edit-btn:hover {
      background: #0f766e;
    }

    .delete-btn:hover {
      background: #b91c1c;
    }
  </style>
{%endblock%}
{%block content%}
<!-- <body> -->

<!-- ‚úÖ HEADER -->
<div class="page-header">
  <div>
    <h2>Staff/User Name Creation</h2>
    <p class="mb-0">User master details</p>
  </div>

  <!-- ‚úÖ Add Button Popup Trigger -->
  <button class="add-btn"
          data-bs-toggle="modal"
          data-bs-target="#addUserModal">
    ‚ûï Add User
  </button>
</div>


<!-- ‚úÖ TABLE LIST -->
<div class="table-card">
  <table class="table table-hover align-middle">
    <thead>
      <tr>
        <th>S.No</th>
        <th>Staff Name</th>
        <th>User Name</th>
        <th>Designation</th>
        <th>Mobile</th>
        <th>User Type</th>
        <th>Active</th>
        <th>Actions</th>
      </tr>
    </thead>

    <tbody>
      {% for user in users %}
      <tr>
        <td>{{ forloop.counter }}</td>
        <td>{{ user.staff_name }}</td>
        <td>{{ user.username }}</td>
        <td>{{ user.designation }}</td>
        <td>{{ user.mobile }}</td>
        <td>{{ user.user_type }}</td>
        <td>{{ user.active }}</td>

        <!-- ‚úÖ Actions -->
        <td>
          <button class="action-btn edit-btn">
            ‚úè Edit
          </button>

          <a href="{% url 'delete_user' user.id %}"
             class="action-btn delete-btn">
            üóë Delete
          </a>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="8" class="text-center text-muted">
          No Records Found
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>


<!-- ‚úÖ POPUP MODAL FORM -->
<div class="modal fade" id="addUserModal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h5 class="modal-title">Staff/User Creation</h5>
        <button type="button"
                class="btn-close"
                data-bs-dismiss="modal"></button>
      </div>

      <!-- Modal Body -->
      <div class="modal-body">
        <form method="POST">
          {% csrf_token %}

          <div class="row g-3">

            <div class="col-md-6">
              <label class="form-label">Staff Name *</label>
              <input type="text"
                     name="staff_name"
                     class="form-control"
                     required>
            </div>

            <div class="col-md-6">
              <label class="form-label">Designation *</label>
              <input type="text"
                     name="designation"
                     class="form-control"
                     required>
            </div>

            <div class="col-md-6">
              <label class="form-label">Mobile No *</label>
              <input type="text"
                     name="mobile"
                     class="form-control">
            </div>

            <!-- ‚úÖ Username + Password Side -->
            <div class="col-md-6">
              <label class="form-label">User Name *</label>
              <input type="text"
                     name="username"
                     class="form-control"
                     required>
            </div>

            <div class="col-md-6">
              <label class="form-label">Password *</label>
              <input type="password"
                     name="password"
                     class="form-control"
                     required>
            </div>

            <div class="col-md-6">
              <label class="form-label">User Type *</label>
              <select name="user_type" class="form-select">
                <option>Select</option>
                <option>Admin</option>
                <option>Accounts</option>
                <option>Job Card</option>
              </select>
            </div>

            <div class="col-md-6">
              <label class="form-label">Active *</label>
              <select name="active" class="form-select">
                <option>Yes</option>
                <option>No</option>
              </select>
            </div>

          </div>

          <!-- Submit Button -->
          <div class="text-center mt-4">
            <button type="submit"
                    class="btn btn-success px-5">
              ADD USER
            </button>
          </div>

        </form>
      </div>

    </div>
  </div>
</div>
{%endblock%}
{%block extra_js%}

<!-- ‚úÖ Bootstrap JS (Popup Work Aaga Must) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
{%endblock%}

